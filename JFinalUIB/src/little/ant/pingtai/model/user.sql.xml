<?xml version="1.0" encoding="UTF-8"?>

<sql-statement namespace="pingtai.user">
	
	<!-- 根据部门Id查询，人员树节点数据 -->
	<sql id="treeUserNode">
		<![CDATA[ 
        	select ids, userName as names from pt_user where departmentIds = ? order by userName asc
    	]]>
	</sql>
	
	<!-- 动态SQL处理 -->
	<sql id="splitPage">
		<![CDATA[ 
        	from pt_user u 
			left join pt_userinfo ui on u.userinfoids = ui.ids 
			left join pt_department d on u.departmentids = d.ids 
			where 1=1 
			<% if(!isEmpty(userClass)){ %>
					and u.userClass = '#userClass#'
			<% } %>
			
			<% if(!isEmpty(userName)){ %>
					and u.userName like '%#userName#%'
			<% } %>
			
			<% if(!isEmpty(names)){ %>
					and ui.names like '%#names#%'
			<% } %>
    	]]>
	</sql>

</sql-statement>